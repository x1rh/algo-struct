## intro

定义：step
时间轮每隔 step 检查一次是否有到期的事件

slot 位置计算

添加 Event，Event 只能指定多久执行一次
我们动态计算 Event 对应的 Slot

Event 先放在最上层的 HourSlot，到了之后，再放入下一层的 MinuteSlot

每次插入的 Event，都插入到当前时间的 interval 毫秒后

时间轮的精度 step，即每个 step 毫秒执行一次。

要求 Event 执行的 interval 是 step 的倍数

时间轮的精度很高，因为它不依赖于具体的现实时间，而是依赖于内部的时间，它保证 Event 一定每隔 interval 秒执行一次。
而关于 Event 每次的运行时间，一定要小于 interval，不然就出错了。

假设当前时间为 22:23:33:900, interval 是 100ms 一次。

那么到了 22:23:33:34:00 将 34 秒 slot 中的 Event 进行处理。

假设 Event 运行的时间是 22:23:33:333, 那么它依次在 4 个 slot 中流转：22h -> 23m -> 33s -> 333ms

所有未来待执行的 Event 都在上层，而最下层代表着即将到达的 Event

Event 记录的是上一次运行时间 + interval

## 怎么测试一个时间轮的精准度？

事件本次运行时间点 - 事件上次运行时间点 - 事件运行间隔 < 时间轮的 step

这意味着时间轮每隔 step 运行一次的前提下，某事件的运行轮次 等于 理论运行轮次 (时间上仍旧有误差)

我在我的电脑上测试 step=50ms 还是没问题的（甚至可以输出到控制台），而 step = 20ms 还是比较难的
我观察 30ms 以内都没大体没问题, 但是考虑到倍数问题，那么 step 取 40ms， 50ms，以及更大值在普通机器下是没问题的。
